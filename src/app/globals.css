@import "tailwindcss";

@theme inline {
  --color-gold: #FFD166;
  --color-gold-dim: #A88840;
  --color-gold-glow: rgba(255,209,102,0.55);
  --color-teal: #06D6A0;
  --color-teal-dim: rgba(6,214,160,0.25);
  --color-rose: #EF476F;
  --color-bg: #060608;
  --color-surface: rgba(10,10,14,0.96);
  --color-surface-alt: rgba(16,15,22,0.9);
  --color-border: rgba(255,209,102,0.14);
  --color-border-hi: rgba(255,209,102,0.45);
  --color-text: #EDE8D8;
  --color-text-dim: #6B6760;
  --color-text-mid: #9D9890;

  --font-display: var(--font-cormorant);
  --font-mono: var(--font-jetbrains);
  --font-sans: var(--font-dm-sans);
}

@layer base {
  html,
  body {
    height: 100%;
    overflow: hidden;
    background: var(--color-bg);
    color: var(--color-text);
    font-family: var(--font-sans), "DM Sans", sans-serif;
  }

  /* Grain overlay */
  body::before {
    content: "";
    position: fixed;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
    opacity: 0.015;
    pointer-events: none;
    z-index: 9999;
  }

  /* Scrollbars */
  ::-webkit-scrollbar { width: 3px; height: 3px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: rgba(255,209,102,0.25); border-radius: 2px; }

  /* Text selection */
  ::selection { background: rgba(255,209,102,0.2); color: #FFD166; }

  /* Range input styling */
  input[type="range"] {
    -webkit-appearance: none;
    height: 3px;
    border-radius: 2px;
    background: rgba(255,209,102,0.15);
    outline: none;
    cursor: pointer;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 12px;
    height: 12px;
    border-radius: 3px;
    background: var(--color-gold);
    cursor: pointer;
  }
}

/* ─── Keyframes ─── */

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(18px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}

@keyframes waveBar {
  0%, 100% { height: 3px; opacity: 0.2; }
  50%      { height: var(--h, 14px); opacity: 0.7; }
}

@keyframes statusBlink {
  0%, 100% { opacity: 1; }
  50%      { opacity: 0.3; }
}

@keyframes orb {
  0%, 100% { transform: translate(-50%,-50%) scale(1); opacity: 0.5; }
  50%      { transform: translate(-50%,-50%) scale(1.12); opacity: 0.9; }
}

@keyframes shimmerLine {
  0%   { background-position: -200% center; }
  100% { background-position: 200% center; }
}

@keyframes dotPulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50%      { transform: scale(0.6); opacity: 0.3; }
}

@keyframes chordAppear {
  from { opacity: 0; transform: translateY(14px) scale(0.93); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes resultReveal {
  from { opacity: 0; transform: translateY(22px); }
  to   { opacity: 1; transform: translateY(0); }
}

@keyframes loadExit {
  from { opacity: 1; }
  to   { opacity: 0; pointer-events: none; }
}

@keyframes rippleOut {
  0%   { transform: translate(-50%,-50%) scale(0); opacity: 0.9; }
  100% { transform: translate(-50%,-50%) scale(6); opacity: 0; }
}

@keyframes keyGlow {
  0%   { box-shadow: 0 0 20px rgba(255,209,102,0.9), inset 0 0 12px rgba(255,209,102,0.4); }
  100% { box-shadow: none; }
}

@keyframes keyGlowBlack {
  0%   { box-shadow: 0 0 18px rgba(255,209,102,0.8), inset 0 0 10px rgba(255,209,102,0.5); }
  100% { box-shadow: 0 2px 8px rgba(0,0,0,0.8); }
}

@keyframes msgSlide {
  from { opacity: 0; transform: translateX(-10px); }
  to   { opacity: 1; transform: translateX(0); }
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

@keyframes thinking {
  0%, 100% { opacity: 0.3; transform: scaleX(0.8); }
  50%      { opacity: 1; transform: scaleX(1); }
}

@keyframes nebulaDrift {
  0%, 100% { transform: translate(0,0) scale(1); }
  33%      { transform: translate(30px,-20px) scale(1.05); }
  66%      { transform: translate(-20px,15px) scale(0.97); }
}

/* ─── Animation utility classes ─── */

.intro-wave-bar {
  animation: waveBar var(--d, 2s) ease-in-out var(--delay, 0s) infinite;
}

.status-blink {
  animation: statusBlink 2s ease-in-out infinite;
}

.dot-pulse {
  animation: dotPulse 1.8s ease-in-out infinite;
}

.shimmer-line {
  background: linear-gradient(90deg, transparent 0%, rgba(255,209,102,0.7) 50%, transparent 100%);
  background-size: 200% 100%;
  animation: shimmerLine 2.5s linear infinite;
}

.spin {
  animation: spin 0.9s linear infinite;
}

.nebula {
  animation: nebulaDrift 18s ease-in-out infinite;
}

.chord-card-appear {
  animation: chordAppear 0.45s cubic-bezier(0.34,1.56,0.64,1) forwards;
}

.result-appear {
  animation: resultReveal 0.5s cubic-bezier(0.22,1,0.36,1) forwards;
}

.msg-appear {
  animation: msgSlide 0.3s cubic-bezier(0.22,1,0.36,1) forwards;
}

.piano-key-white.active {
  animation: keyGlow 1.2s ease-out forwards;
  background: rgba(255,209,102,0.35) !important;
}

.piano-key-black.active {
  animation: keyGlowBlack 1.2s ease-out forwards;
  background: rgba(255,209,102,0.45) !important;
}

.ripple-circle {
  position: absolute;
  border-radius: 50%;
  animation: rippleOut 1.1s cubic-bezier(0.22,1,0.36,1) forwards;
  pointer-events: none;
  border: 1px solid rgba(255,209,102,0.6);
}

/* ─── Drum Pattern System ─── */

@keyframes stepCursor {
  0%, 100% { opacity: 0.3; }
  50%      { opacity: 0.8; }
}

@keyframes stepCellActive {
  0%, 100% { filter: brightness(1); }
  50%      { filter: brightness(1.3); }
}

@keyframes panelSlideUp {
  from { transform: translateY(100%); opacity: 0; }
  to   { transform: translateY(0); opacity: 1; }
}

.step-cursor {
  animation: stepCursor 0.4s ease-in-out infinite;
}

.step-cell-active {
  animation: stepCellActive 2s ease-in-out infinite;
}

.panel-slide-up {
  animation: panelSlideUp 0.3s cubic-bezier(0.22,1,0.36,1) forwards;
}
